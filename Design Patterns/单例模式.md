## 概念

单例就是保证一个类只有一个实例，并提供一个全局访问点，实现的方法一般是先判断实例存在与否，如果存在直接返回，如果不存在就创建了再返回，这就确保了一个类只有一个实例对象。



##创建

在JS中创建一个单例模式很简单，比如：

```javascript
var Singleton = {
    name: 'Barney',
    sayHi: function () {
        var self = this;
        console.log(`Hello, I am ${self.name}`);
    }
}
```

但是这种方法会将你的单例全部的属性和方法都暴露，为此，还可以使用闭包来创建一个单例，比如：

```javascript
var Singleton = function () {
    var name = 'Barney';
    return {
        sayHi: function () {
            console.log(`Hello, I am ${name}`);
        }
    }
}
var obj = Singleton();
obj.sayHi(); // Hello, I am Barney
```

但是，闭包虽然保护了私有属性和方法，却不能在需要时创建，而且也无法保证只有一个实例。所以接下来就是重头戏了，惰性单例：

```javascript
var Singleton = (function () {
  var instance;
  function init () {
    var name = 'Barney';
    return {
      sayHi: function () {
        console.log(`Hello, I am ${name}`);
      }
    }
  }
  return {
    getInstance: function () {
      if (!instance) {
        instance = init();
      }
      return instance;
    }
  }
})();
var obj = Singleton.getInstance().sayHi();
```

这样，Singleton就只有一个实例，而且是在需要时创建的。其实第二个闭包的方法我觉得也是在需要时创建的，只是这样无法保证它是只有一个实例而已。



## 应用

讲的是一个弹窗的实例demo

地址：https://github.com/luozhihao/javascript-mode/blob/master/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/demo.html
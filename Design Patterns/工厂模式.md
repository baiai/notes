## 概念

工厂模式定义一个用于创建对象的接口，这个接口由子类决定实例化哪一个类。该模式使一个类的实例化延迟到了子类，而子类可以重写接口方法来创建自己的对象类型。

作用：

1. 用于构建十分复杂的对象
2. 需要依赖具体的环境创建不同的实例
3. 处理大量具有相同属性的小对象

注意事项：

1. 不能滥用工厂模式，否则会增加代码的复杂度



##应用

工厂模式分为简单工厂模式、抽象工厂模式。

简单工厂模式适用于：创建的对象较少且用户不关心对象的创建过程，如：

```javascript
function Type (str) {
  return function () {
    return Object.prototype.toString.call(this) === `[object ${str}]`
  }
}
var typeArr = Type('Array')
var typeFunc = Type('Function')
var arr = []
var func = function () {}
console.log(typeArr.call(arr))
console.log(typeFunc.call(func))
```

Type工厂只返回了一个判别函数是否是输入的str的类型，然后由返回的函数自行判断。Type函数只创建了一个对象。



抽象工厂模式：

```javascript
function Factory () {}
Factory.prototype = {
  createThings: function () {
    throw new Error('this is an abstract class')
  }
}

var ShoesFactory = function () {
  Factory.call(this)
}
ShoesFactory.prototype = new Factory()
ShoesFactory.prototype.constructor = ShoesFactory

ShoesFactory.prototype.createThings = function () {
  console.log('鞋子完成了')
}

var ClothesFactory = function () {
  Factory.call(this)
}
ClothesFactory.prototype = new Factory()
ClothesFactory.prototype.constructor = ClothesFactory

ClothesFactory.prototype.createThings = function () {
  console.log('衣服完成了')
}

var shoes = new ShoesFactory()
var clothes = new ClothesFactory()
shoes.createThings()
clothes.createThings()
```

在这个例子中，Factory值提供了createThings这个接口，并没有任何的实现，如果要使用Factory的createThings会报错。而ShoesFactory和ClothesFactory都继承了Factory，然后又从新定义了createThings的方法。并有两个子类创建的对象去调用。而Factory的作用就是提供一个共有属性的定义和接口，而不会去具体实现。
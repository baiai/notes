## 概念

观察者模式又叫发布-订阅模式，它定义了一种`一对多的关系`，让多个观察者对象同时监听某一个主题对象，这个主题对象的状态变化时，就会通知所有的观察者对象，使得它们自己更新自己。

作用：

1. 支持简单的广播通信，自动通知所有订阅过的对象
2. 主题对象与观察者存在一种动态关联，增加了灵活性
3. 目标对象与观察者之间的抽象耦合关系可以单独扩展以及重用

注意事项：

1. 监听要在触发之前
2. 创建订阅者要消耗时间和内存，就算订阅的消息已知不发生，订阅者也会一直存在内存中



## 用例

观察者模式的用处很多，比如Vue中的数据双向绑定就是一个观察者模式，以下简单举个例子：

Public是一个主题对象，每个调用了subscribe的函数都会被保存在里面，在有消息发布是就会调用。

```javascript
var Public = {
  Subs: {},
  // 订阅
  subscribe: function (key, fn) {
    if (!this.Subs[key]) {
      this.Subs[key] = fn
    }
  },
  // 取消订阅
  unSubcscribe: function (key) {
    if (this.Subs[key]) {
      delete this.Subs[key]
    }
  },
  // 发布
  publish: function () {
    for (sub in this.Subs) {
      this.Subs[sub]()
    }
  }
}
var aa = function () {
  console.log('aa subscribe success')
}
var bb = function () {
  console.log('bb subscribe success')
}
Public.subscribe('aa', aa)
Public.subscribe('bb', bb)
Public.publish()
```



参考资料：

发布订阅与观察者的异同：https://juejin.im/post/5a14e9edf265da4312808d86
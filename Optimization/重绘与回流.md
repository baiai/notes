UI渲染会导致JS运行阻塞，所以如果页面长时间处于渲染状态，会导致JS不能及时运行，影响页面的效果。而除了最开始的页面渲染之外，重绘和回流是触发UI渲染的主要原因。

##重绘与回流

重绘的触发条件：当页面的元素的颜色之类的不影响布局的属性发生变化时会触发重绘。

回流的触发条件：当页面中的元素因为尺寸、布局、隐藏等改变而需要重新构建的时候，就会触发回流。回流必定触发重绘。

触发回流的属性：

- 盒子模型相关属性会触发重布局

  width, height, padding, margin, display, border, min-hieght等等

- 定位属性及浮动也会触发重布局

  top, bottom, left, right, position, float, clear等等

- 改变节点内部文字结构触发重布局

  text-align, overflow, font-weight, font-family, line-height, vertical-align, white-space

触发重绘的属性：

color, border-style, border-radius, visibility, text-decoration, background-一系列, outlin, box-shadow



## 如何减少重绘和回流

1. 使用别的手段代替触发重绘和回流的属性
2. 将重绘和回流的影响限制在单独的图层。但是图层合并会消耗大量资源，所以不能过度使用。创建图层的方式很多，比如translate3d、vedio、canvas等等。



## 具体细节实现

1. 用translate替换top的改变，translate只触发重绘，而top会触发回流。
2. 用opacity替换visibility
3. 对频繁切换的class，预先定义好class，修改class的时候就可以直接替换className而不是想已有class添加属性
4. 把DOM离线后修改，比如：先将DOMdisplay：none，然后修改多次之后，在显示出来。在display：none的情况下，修改样式是不会触发重绘的。
5. 不要把DOM节点的属性值放在一个循环里当成循环里的变量
6. 不要使用table布局，可能很小的一个改动就会导致整个table重新布局
7. 动画实现的速度的选择
8. 对于动画新建图层
9. 启动GPU硬件加速